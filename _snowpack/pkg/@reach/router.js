import{r as h}from"../common/index-927aee77.js";import{p as mt}from"../common/index-c1e30e03.js";import{a as z,c as Y,b as yt}from"../common/_commonjsHelpers-0597c316.js";var gt=function(o,t,n,e,r,i,p,a){if(!o){var s;if(t===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,e,r,i,p,a],f=0;s=new Error(t.replace(/%s/g,function(){return l[f++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}},O=gt,X="__global_unique_id__",_t=function(){return z[X]=(z[X]||0)+1},bt=function(){},Pt=bt,wt=Y(function(o,t){t.__esModule=!0,r(h);var n=r(mt),e=r(_t);r(Pt);function r(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function p(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function a(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var s=1073741823;function l(c,u){return c===u?c!==0||1/c==1/u:c!==c&&u!==u}function f(c){var u=[];return{on:function(P){u.push(P)},off:function(P){u=u.filter(function(y){return y!==P})},get:function(){return c},set:function(P,y){c=P,u.forEach(function(E){return E(c,y)})}}}function d(c){return Array.isArray(c)?c[0]:c}function m(c,u){var _,P,y="__create-react-context-"+(0,e.default)()+"__",E=function(S){a(g,S);function g(){var b,v,w;i(this,g);for(var R=arguments.length,D=Array(R),x=0;x<R;x++)D[x]=arguments[x];return w=(b=(v=p(this,S.call.apply(S,[this].concat(D))),v),v.emitter=f(v.props.value),b),p(v,w)}return g.prototype.getChildContext=function(){var v;return v={},v[y]=this.emitter,v},g.prototype.componentWillReceiveProps=function(v){if(this.props.value!==v.value){var w=this.props.value,R=v.value,D=void 0;l(w,R)?D=0:(D=typeof u=="function"?u(w,R):s,D|=0,D!==0&&this.emitter.set(v.value,D))}},g.prototype.render=function(){return this.props.children},g}(h.Component);E.childContextTypes=(_={},_[y]=n.default.object.isRequired,_);var T=function(S){a(g,S);function g(){var b,v,w;i(this,g);for(var R=arguments.length,D=Array(R),x=0;x<R;x++)D[x]=arguments[x];return w=(b=(v=p(this,S.call.apply(S,[this].concat(D))),v),v.state={value:v.getValue()},v.onUpdate=function(zt,ht){var dt=v.observedBits|0;(dt&ht)!=0&&v.setState({value:v.getValue()})},b),p(v,w)}return g.prototype.componentWillReceiveProps=function(v){var w=v.observedBits;this.observedBits=w??s},g.prototype.componentDidMount=function(){this.context[y]&&this.context[y].on(this.onUpdate);var v=this.props.observedBits;this.observedBits=v??s},g.prototype.componentWillUnmount=function(){this.context[y]&&this.context[y].off(this.onUpdate)},g.prototype.getValue=function(){return this.context[y]?this.context[y].get():c},g.prototype.render=function(){return d(this.props.children)(this.state.value)},g}(h.Component);return T.contextTypes=(P={},P[y]=n.default.object,P),{Provider:E,Consumer:T}}t.default=m,o.exports=t.default}),Et=Y(function(o,t){t.__esModule=!0;var n=r(h),e=r(wt);function r(i){return i&&i.__esModule?i:{default:i}}t.default=n.default.createContext||e.default,o.exports=t.default}),St=yt(Et);function J(){var o=this.constructor.getDerivedStateFromProps(this.props,this.state);o!=null&&this.setState(o)}function Z(o){function t(n){var e=this.constructor.getDerivedStateFromProps(o,n);return e??null}this.setState(t.bind(this))}function tt(o,t){try{var n=this.props,e=this.state;this.props=o,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,e)}finally{this.props=n,this.state=e}}J.__suppressDeprecationWarning=!0,Z.__suppressDeprecationWarning=!0,tt.__suppressDeprecationWarning=!0;function Rt(o){var t=o.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof o.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return o;var n=null,e=null,r=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?e="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(e="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?r="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),n!==null||e!==null||r!==null){var i=o.displayName||o.name,p=typeof o.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+p+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(e!==null?`
  `+e:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof o.getDerivedStateFromProps=="function"&&(t.componentWillMount=J,t.componentWillReceiveProps=Z),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=tt;var a=t.componentDidUpdate;t.componentDidUpdate=function(l,f,d){var m=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:d;a.call(this,l,f,m)}}return o}var $=function(t,n){return t.substr(0,n.length)===n},Ut=function(t,n){for(var e=void 0,r=void 0,i=n.split("?"),p=i[0],a=W(p),s=a[0]==="",l=It(t),f=0,d=l.length;f<d;f++){var m=!1,c=l[f].route;if(c.default){r={route:c,params:{},uri:n};continue}for(var u=W(c.path),_={},P=Math.max(a.length,u.length),y=0;y<P;y++){var E=u[y],T=a[y];if(ot(E)){var S=E.slice(1)||"*";_[S]=a.slice(y).map(decodeURIComponent).join("/");break}if(T===void 0){m=!0;break}var g=B.exec(E);if(g&&!s){var b=Mt.indexOf(g[1])===-1;b||O(!1);var v=decodeURIComponent(T);_[g[1]]=v}else if(E!==T){m=!0;break}}if(!m){e={route:c,params:_,uri:"/"+a.slice(0,y).join("/")};break}}return e||r||null},I=function(t,n){if($(t,"/"))return t;var e=t.split("?"),r=e[0],i=e[1],p=n.split("?"),a=p[0],s=W(r),l=W(a);if(s[0]==="")return M(a,i);if(!$(s[0],".")){var f=l.concat(s).join("/");return M((a==="/"?"":"/")+f,i)}for(var d=l.concat(s),m=[],c=0,u=d.length;c<u;c++){var _=d[c];_===".."?m.pop():_!=="."&&m.push(_)}return M("/"+m.join("/"),i)},et=function(t,n){var e=t.split("?"),r=e[0],i=e[1],p=i===void 0?"":i,a=W(r),s="/"+a.map(function(c){var u=B.exec(c);return u?n[u[1]]:c}).join("/"),l=n.location;l=l===void 0?{}:l;var f=l.search,d=f===void 0?"":f,m=d.split("?")[1]||"";return s=M(s,p,m),s},Dt=function(t,n){var e=function(a){return rt(a)},r=W(t).filter(e).sort().join("/"),i=W(n).filter(e).sort().join("/");return r===i},B=/^:(.+)/,nt=4,Tt=3,xt=2,Wt=1,Ft=1,Ct=function(t){return t===""},rt=function(t){return B.test(t)},ot=function(t){return t&&t[0]==="*"},Ot=function(t,n){var e=t.default?0:W(t.path).reduce(function(r,i){return r+=nt,Ct(i)?r+=Ft:rt(i)?r+=xt:ot(i)?r-=nt+Wt:r+=Tt,r},0);return{route:t,score:e,index:n}},It=function(t){return t.map(Ot).sort(function(n,e){return n.score<e.score?1:n.score>e.score?-1:n.index-e.index})},W=function(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")},M=function(t){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return e=e.filter(function(i){return i&&i.length>0}),t+(e&&e.length>0?"?"+e.join("&"):"")},Mt=["uri","path"],Nt=function(t,n){var e=Object.keys(t);return e.length===Object.keys(n).length&&e.every(function(r){return n.hasOwnProperty(r)&&t[r]===n[r]})},jt=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e])}return o},H=function(t){var n=t.location,e=n.search,r=n.hash,i=n.href,p=n.origin,a=n.protocol,s=n.host,l=n.hostname,f=n.port,d=t.location.pathname;if(!d&&i&&it){var m=new URL(i);d=m.pathname}return{pathname:encodeURI(decodeURI(d)),search:e,hash:r,href:i,origin:p,protocol:a,host:s,hostname:l,port:f,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}},Lt=function(t,n){var e=[],r=H(t),i=!1,p=function(){};return{get location(){return r},get transitioning(){return i},_onTransitionComplete:function(){i=!1,p()},listen:function(s){e.push(s);var l=function(){r=H(t),s({location:r,action:"POP"})};return t.addEventListener("popstate",l),function(){t.removeEventListener("popstate",l),e=e.filter(function(f){return f!==s})}},navigate:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=l.state,d=l.replace,m=d===void 0?!1:d;if(typeof s=="number")t.history.go(s);else{f=jt({},f,{key:Date.now()+""});try{i||m?t.history.replaceState(f,null,s):t.history.pushState(f,null,s)}catch(u){t.location[m?"replace":"assign"](s)}}r=H(t),i=!0;var c=new Promise(function(u){return p=u});return e.forEach(function(u){return u({location:r,action:"PUSH"})}),c}}},At=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/",n=t.indexOf("?"),e={pathname:n>-1?t.substr(0,n):t,search:n>-1?t.substr(n):""},r=0,i=[e],p=[null];return{get location(){return i[r]},addEventListener:function(s,l){},removeEventListener:function(s,l){},history:{get entries(){return i},get index(){return r},get state(){return p[r]},pushState:function(s,l,f){var d=f.split("?"),m=d[0],c=d[1],u=c===void 0?"":c;r++,i.push({pathname:m,search:u.length?"?"+u:u}),p.push(s)},replaceState:function(s,l,f){var d=f.split("?"),m=d[0],c=d[1],u=c===void 0?"":c;i[r]={pathname:m,search:u},p[r]=s},go:function(s){var l=r+s;l<0||l>p.length-1||(r=l)}}}},it=!!(typeof window!="undefined"&&window.document&&window.document.createElement),$t=function(){return it?window:At()},Bt=Lt($t()),U=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e])}return o};function F(o,t){var n={};for(var e in o)t.indexOf(e)>=0||!Object.prototype.hasOwnProperty.call(o,e)||(n[e]=o[e]);return n}function N(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function C(o,t){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:o}function j(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(o,t):o.__proto__=t)}var k=function(t,n){var e=St(n);return e.displayName=t,e},at=k("Location"),q=function(t){var n=t.children;return h.createElement(at.Consumer,null,function(e){return e?n(e):h.createElement(ut,null,n)})},ut=function(o){j(t,o);function t(){var n,e,r;N(this,t);for(var i=arguments.length,p=Array(i),a=0;a<i;a++)p[a]=arguments[a];return r=(n=(e=C(this,o.call.apply(o,[this].concat(p))),e),e.state={context:e.getContext(),refs:{unlisten:null}},n),C(e,r)}return t.prototype.getContext=function(){var e=this.props.history,r=e.navigate,i=e.location;return{navigate:r,location:i}},t.prototype.componentDidCatch=function(e,r){if(qt(e)){var i=this.props.history.navigate;i(e.uri,{replace:!0})}else throw e},t.prototype.componentDidUpdate=function(e,r){r.context.location!==this.state.context.location&&this.props.history._onTransitionComplete()},t.prototype.componentDidMount=function(){var e=this,r=this.state.refs,i=this.props.history;i._onTransitionComplete(),r.unlisten=i.listen(function(){Promise.resolve().then(function(){requestAnimationFrame(function(){e.unmounted||e.setState(function(){return{context:e.getContext()}})})})})},t.prototype.componentWillUnmount=function(){var e=this.state.refs;this.unmounted=!0,e.unlisten()},t.prototype.render=function(){var e=this.state.context,r=this.props.children;return h.createElement(at.Provider,{value:e},typeof r=="function"?r(e):r||null)},t}(h.Component);ut.defaultProps={history:Bt};var L=k("Base",{baseuri:"/",basepath:"/"}),st=function(t){return h.createElement(L.Consumer,null,function(n){return h.createElement(q,null,function(e){return h.createElement(ct,U({},n,e,t))})})},ct=function(o){j(t,o);function t(){return N(this,t),C(this,o.apply(this,arguments))}return t.prototype.render=function(){var e=this.props,r=e.location,i=e.navigate,p=e.basepath,a=e.primary,s=e.children;e.baseuri;var l=e.component,f=l===void 0?"div":l,d=F(e,["location","navigate","basepath","primary","children","baseuri","component"]),m=h.Children.toArray(s).reduce(function(v,w){var R=Gt(p)(w);return v.concat(R)},[]),c=r.pathname,u=Ut(m,c);if(u){var _=u.params,P=u.uri,y=u.route,E=u.route.value;p=y.default?p:y.path.replace(/\*$/,"");var T=U({},_,{uri:P,location:r,navigate:function(w,R){return i(I(w,P),R)}}),S=h.cloneElement(E,T,E.props.children?h.createElement(st,{location:r,primary:a},E.props.children):void 0),g=a?Ht:f,b=a?U({uri:P,location:r,component:f},d):d;return h.createElement(L.Provider,{value:{baseuri:P,basepath:p}},h.createElement(g,b,S))}else return null},t}(h.PureComponent);ct.defaultProps={primary:!0};var pt=k("Focus"),Ht=function(t){var n=t.uri,e=t.location,r=t.component,i=F(t,["uri","location","component"]);return h.createElement(pt.Consumer,null,function(p){return h.createElement(lt,U({},i,{component:r,requestFocus:p,uri:n,location:e}))})},K=!0,V=0,lt=function(o){j(t,o);function t(){var n,e,r;N(this,t);for(var i=arguments.length,p=Array(i),a=0;a<i;a++)p[a]=arguments[a];return r=(n=(e=C(this,o.call.apply(o,[this].concat(p))),e),e.state={},e.requestFocus=function(s){!e.state.shouldFocus&&s&&s.focus()},n),C(e,r)}return t.getDerivedStateFromProps=function(e,r){var i=r.uri==null;if(i)return U({shouldFocus:!0},e);var p=e.uri!==r.uri,a=r.location.pathname!==e.location.pathname&&e.location.pathname===e.uri;return U({shouldFocus:p||a},e)},t.prototype.componentDidMount=function(){V++,this.focus()},t.prototype.componentWillUnmount=function(){V--,V===0&&(K=!0)},t.prototype.componentDidUpdate=function(e,r){e.location!==this.props.location&&this.state.shouldFocus&&this.focus()},t.prototype.focus=function(){var e=this.props.requestFocus;e?e(this.node):K?K=!1:this.node&&(this.node.contains(document.activeElement)||this.node.focus())},t.prototype.render=function(){var e=this,r=this.props;r.children;var i=r.style;r.requestFocus;var p=r.component,a=p===void 0?"div":p;r.uri,r.location;var s=F(r,["children","style","requestFocus","component","uri","location"]);return h.createElement(a,U({style:U({outline:"none"},i),tabIndex:"-1",ref:function(f){return e.node=f}},s),h.createElement(pt.Provider,{value:this.requestFocus},this.props.children))},t}(h.Component);Rt(lt);var kt=function(){},G=h.forwardRef;typeof G=="undefined"&&(G=function(t){return t});var ft=G(function(o,t){var n=o.innerRef,e=F(o,["innerRef"]);return h.createElement(L.Consumer,null,function(r){r.basepath;var i=r.baseuri;return h.createElement(q,null,function(p){var a=p.location,s=p.navigate,l=e.to,f=e.state,d=e.replace,m=e.getProps,c=m===void 0?kt:m,u=F(e,["to","state","replace","getProps"]),_=I(l,i),P=encodeURI(_),y=a.pathname===P,E=$(a.pathname,P);return h.createElement("a",U({ref:t||n,"aria-current":y?"page":void 0},u,c({isCurrent:y,isPartiallyCurrent:E,href:_,location:a}),{href:_,onClick:function(S){if(u.onClick&&u.onClick(S),Qt(S)){S.preventDefault();var g=d;if(typeof d!="boolean"&&y){var b=U({},a.state);b.key;var v=F(b,["key"]);g=Nt(U({},f),v)}s(_,{state:f,replace:g})}}}))})})});ft.displayName="Link";function vt(o){this.uri=o}var qt=function(t){return t instanceof vt},Kt=function(t){throw new vt(t)},Vt=function(o){j(t,o);function t(){return N(this,t),C(this,o.apply(this,arguments))}return t.prototype.componentDidMount=function(){var e=this.props,r=e.navigate,i=e.to;e.from;var p=e.replace,a=p===void 0?!0:p,s=e.state;e.noThrow;var l=e.baseuri,f=F(e,["navigate","to","from","replace","state","noThrow","baseuri"]);Promise.resolve().then(function(){var d=I(i,l);r(et(d,f),{replace:a,state:s})})},t.prototype.render=function(){var e=this.props;e.navigate;var r=e.to;e.from,e.replace,e.state;var i=e.noThrow,p=e.baseuri,a=F(e,["navigate","to","from","replace","state","noThrow","baseuri"]),s=I(r,p);return i||Kt(et(s,a)),null},t}(h.Component),A=function(t){return h.createElement(L.Consumer,null,function(n){var e=n.baseuri;return h.createElement(q,null,function(r){return h.createElement(Vt,U({},r,{baseuri:e},t))})})},Q=function(t){return t.replace(/(^\/+|\/+$)/g,"")},Gt=function o(t){return function(n){if(!n)return null;if(n.type===h.Fragment&&n.props.children)return h.Children.map(n.props.children,o(t));if(n.props.path||n.props.default||n.type===A||O(!1),n.type===A&&(!n.props.from||!n.props.to)&&O(!1),n.type===A&&!Dt(n.props.from,n.props.to)&&O(!1),n.props.default)return{value:n,default:!0};var e=n.type===A?n.props.from:n.props.path,r=e==="/"?t:Q(t)+"/"+Q(e);return{value:n,default:n.props.default,path:n.props.children?Q(r)+"/*":r}}},Qt=function(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)};export{ft as Link,st as Router};
