import p from"../../../_snowpack/pkg/axios.js";import{setAuthToken as a}from"../../utils/setAuthToken.js";import i from"../../../_snowpack/pkg/jwt-decode.js";import{SET_CURRENT_USER as m,USER_LOADING as d}from"../types/authTypes.js";import{GET_ERRORS as n}from"../types/errorTypes.js";export const userRegister=({payload:t,navigate:s})=>o=>{p.post("/api/auth/register",t).then(()=>s("/login")).catch(e=>o({type:n,payload:e.response.data}))},userLogin=({payload:t,navigate:s})=>o=>{p.post("/api/auth/login",t).then(({data:e})=>{const{token:r}=e;localStorage.setItem("jwtToken",r),a(r);const c=i(r);o(setCurrentUser(c)),s("/")}).catch(e=>o({type:n,payload:e.response.data}))},setCurrentUser=t=>({type:m,payload:t}),setUserLoading=()=>({type:d}),logoutUser=()=>t=>{localStorage.removeItem("jwtToken"),a(!1),t(setCurrentUser({}))};
